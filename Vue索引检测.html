<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport"
          content="width=device-width, initial-scale=1,minimum-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="stylesheet" href="css/utils.css"/>
    <link rel="stylesheet" href="css/style.css">
    <script src="js/vue.js"></script>
    <script src="js/jquery-3.3.1.js"></script>
    <title>$Title$</title>
    <style>
        * {
            moz-user-select: -moz-none;
            -moz-user-select: none;
            -o-user-select: none;
            -khtml-user-select: none;
            -webkit-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
    </style>
</head>
<body>
<div class="product-list" id="app">
    <div class="show-img">
        <img src="img/商品展示大图.png" width="100%" height="100%">
        <div class="show-bottom ">
            <div class=" show-name space-no2">
                <div class="show-img-img">
                    <img src="img/other/showimg.png" alt="">
                </div>
                <div class="show-img-font">
                    <p class="name">登瀛楼</p>
                    <p class="zuan">
                        <span class="z"></span>
                        <span class="z"></span>
                        <span class="z"></span>
                        <span class="z"></span>
                        <span class="z"></span>
                    </p>
                    <p class="jieshao ">公告：做餐饮我们是认真的，中高端餐饮只有…</p>
                </div>
            </div>
        </div>

    </div>
    <div class="massage">
        <div class="massgge-1">
            <p><span class="sucsse">首</span><span>新用户首次下单立减300元</span></p>
            <p><span>6个活动</span><span>▲</span></p>
        </div>
        <p class="massgge-2"><span class="massgge-2-1">商品</span>    </span><span class="massgge-2-2">评价：9.9分</span></p>
    </div>
    <div class="set-meal">
        <ul>

            <li v-for="item in tao">{{item.title}}</li>
            <li>热菜</li>
        </ul>
        <div class="set-meal-warp">
            <p class="set-meal-warp-1">{{tao.title}}</p>
            <ul >

                <li v-for="(item,index) in tao.products">
                    <img src="img/other/listbackground.png" alt="" width="70" height="70">
                    <div class="menu-warp1">
                        <p style="font-size:14px;color:#333333;">{{item.pro_name}}</p>
                        <p class="menu"
                           style="max-width:80%; white-space:nowrap;text-overflow:ellipsis;overflow:hidden;">
                            {{item.pro_menu}} </p>
                        <p style="font-size:11px;color:#666;">销量{{item.pro_sales}}</p>
                        <div>
                            <p style="font-size: 12px;display: inline-block;">￥<span
                                    style="font-size: 14px">{{item.pro_pries}}</span></p>
                            <p class="number-car  f-right">
                                <span class="cut" @click="item.pro_num>0?item.pro_num--:'';getIsOk(index)"></span>
                                <span class="l-b"
                                      style="height: 20px;width: 20px;text-align: center;font-size: 14px;line-height: 20px;">{{item.pro_num}}</span>
                                <span class="add " @click="getIndex(index);item.pro_num++"
                                ></span>
                            </p>

                        </div>
                    </div>

                </li>

            </ul>
            <p class="set-meal-warp-1">{{liang.title}}</p>
            <ul >

                <li v-for="(item,index) in liang.products">
                    <img src="img/other/listbackground.png" alt="" width="70" height="70">
                    <div class="menu-warp1">
                        <p style="font-size:14px;color:#333333;">{{item.pro_name}}</p>
                        <p class="menu"
                           style="max-width:80%; white-space:nowrap;text-overflow:ellipsis;overflow:hidden;">
                            {{item.pro_menu}} </p>
                        <p style="font-size:11px;color:#666;">销量{{item.pro_sales}}</p>
                        <div>
                            <p style="font-size: 12px;display: inline-block;">￥<span
                                    style="font-size: 14px">{{item.pro_pries}}</span></p>
                            <p class="number-car  f-right">
                                <span class="cut" @click="item.pro_num>0?item.pro_num--:'';getIsOk(index)"></span>
                                <span class="l-b"
                                      style="height: 20px;width: 20px;text-align: center;font-size: 14px;line-height: 20px;">{{item.pro_num}}</span>
                                <span class="add " @click="getIndex(index);item.pro_num++"
                                ></span>
                            </p>

                        </div>
                    </div>

                </li>

            </ul>
            <p class="set-meal-warp-1">{{re.title}}</p>
            <ul >

                <li v-for="(item,index) in re.products">
                    <img src="img/other/listbackground.png" alt="" width="70" height="70">
                    <div class="menu-warp1">
                        <p style="font-size:14px;color:#333333;">{{item.pro_name}}</p>
                        <p class="menu"
                           style="max-width:80%; white-space:nowrap;text-overflow:ellipsis;overflow:hidden;">
                            {{item.pro_menu}} </p>
                        <p style="font-size:11px;color:#666;">销量{{item.pro_sales}}</p>
                        <div>
                            <p style="font-size: 12px;display: inline-block;">￥<span
                                    style="font-size: 14px">{{item.pro_pries}}</span></p>
                            <p class="number-car  f-right">
                                <span class="cut" @click="item.pro_num>0?item.pro_num--:'';getIsOk(index)"></span>
                                <span class="l-b"
                                      style="height: 20px;width: 20px;text-align: center;font-size: 14px;line-height: 20px;">{{item.pro_num}}</span>
                                <span class="add " @click="getIndex(index);item.pro_num++"
                                ></span>
                            </p>

                        </div>
                    </div>

                </li>

            </ul>
        </div>
    </div>
    <div class="product-list-footer">
        <div class="footer-l">
            <div class="car l-b">
                <span class=" wam l-b" style="line-height: 16px;">{{GetAllpries.allnum}}</span>
            </div>
            <div class="color-w">
                总计:￥{{GetAllpries.allprise}}
            </div>
        </div>
        <div class="footer-r" style="text-align: center;">还差200起送</div>
    </div>
</div>
<div style="height:50px;"></div>

<script src="js/vue.js"></script>
<script>

    var vm = new Vue({
            el: "#app",
            data: {
                tao:{
                    title:"套餐",
                    products: [
                        {
                            'pro_name': '精选米饭套餐',
                            'pro_menu': '精品烤鸭、老城水爆肚、芥末鸭掌',
                            'pro_sales': '18',
                            'pro_pries': 29.01,
                            'pro_num': 0
                        },
                        {
                            'pro_name': '精选米饭套餐',
                            'pro_menu': '精品烤鸭、老城水爆肚、芥末鸭掌',
                            'pro_sales': '0',
                            'pro_pries': 29.00,
                            'pro_num': 0
                        },
                        {
                            'pro_name': '精选米饭套餐',
                            'pro_menu': '精品烤鸭、老城水爆肚、芥末鸭掌',
                            'pro_sales': '18',
                            'pro_pries': 29.01,
                            'pro_num': 0
                        },
                    ],
                },
                liang:{
                    title:"凉菜",
                    products: [
                        {
                            'pro_name': '精选米饭套餐',
                            'pro_menu': '精品烤鸭、老城水爆肚、芥末鸭掌',
                            'pro_sales': '18',
                            'pro_pries': 29.01,
                            'pro_num': 0
                        },{
                            'pro_name': '精选米饭套餐',
                            'pro_menu': '精品烤鸭、老城水爆肚、芥末鸭掌',
                            'pro_sales': '0',
                            'pro_pries': 29.00,
                            'pro_num': 0
                        },
                        {
                            'pro_name': '精选米饭套餐',
                            'pro_menu': '精品烤鸭、老城水爆肚、芥末鸭掌',
                            'pro_sales': '18',
                            'pro_pries': 29.01,
                            'pro_num': 0
                        },
                        {
                            'pro_name': '精选米饭套餐',
                            'pro_menu': '精品烤鸭、老城水爆肚、芥末鸭掌',
                            'pro_sales': '18',
                            'pro_pries': 29.01,
                            'pro_num': 0
                        },
                        {
                            'pro_name': '精选米饭套餐',
                            'pro_menu': '精品烤鸭、老城水爆肚、芥末鸭掌',
                            'pro_sales': '0',
                            'pro_pries': 29.00,
                            'pro_num': 0
                        },
                        {
                            'pro_name': '精选米饭套餐',
                            'pro_menu': '精品烤鸭、老城水爆肚、芥末鸭掌',
                            'pro_sales': '18',
                            'pro_pries': 29.01,
                            'pro_num': 0
                        },
                        {
                            'pro_name': '精选米饭套餐',
                            'pro_menu': '精品烤鸭、老城水爆肚、芥末鸭掌',
                            'pro_sales': '18',
                            'pro_pries': 29.01,
                            'pro_num': 0
                        },
                        {
                            'pro_name': '精选米饭套餐',
                            'pro_menu': '精品烤鸭、老城水爆肚、芥末鸭掌',
                            'pro_sales': '0',
                            'pro_pries': 29.00,
                            'pro_num': 0
                        },

                    ],
                },
                re:{
                    title:"热菜",
                    products: [
                        {
                            'pro_name': '精选米饭套餐',
                            'pro_menu': '精品烤鸭、老城水爆肚、芥末鸭掌',
                            'pro_sales': '18',
                            'pro_pries': 29.01,
                            'pro_num': 0
                        },{
                            'pro_name': '精选米饭套餐',
                            'pro_menu': '精品烤鸭、老城水爆肚、芥末鸭掌',
                            'pro_sales': '0',
                            'pro_pries': 29.00,
                            'pro_num': 0
                        },
                        {
                            'pro_name': '精选米饭套餐',
                            'pro_menu': '精品烤鸭、老城水爆肚、芥末鸭掌',
                            'pro_sales': '18',
                            'pro_pries': 29.01,
                            'pro_num': 0
                        },
                        {
                            'pro_name': '精选米饭套餐',
                            'pro_menu': '精品烤鸭、老城水爆肚、芥末鸭掌',
                            'pro_sales': '18',
                            'pro_pries': 29.01,
                            'pro_num': 0
                        },
                        {
                            'pro_name': '精选米饭套餐',
                            'pro_menu': '精品烤鸭、老城水爆肚、芥末鸭掌',
                            'pro_sales': '0',
                            'pro_pries': 29.00,
                            'pro_num': 0
                        },
                        {
                            'pro_name': '精选米饭套餐',
                            'pro_menu': '精品烤鸭、老城水爆肚、芥末鸭掌',
                            'pro_sales': '18',
                            'pro_pries': 29.01,
                            'pro_num': 0
                        },
                        {
                            'pro_name': '精选米饭套餐',
                            'pro_menu': '精品烤鸭、老城水爆肚、芥末鸭掌',
                            'pro_sales': '18',
                            'pro_pries': 29.01,
                            'pro_num': 0
                        },
                        {
                            'pro_name': '精选米饭套餐',
                            'pro_menu': '精品烤鸭、老城水爆肚、芥末鸭掌',
                            'pro_sales': '0',
                            'pro_pries': 29.00,
                            'pro_num': 0
                        },

                    ],},

                addCar: []
            },
            methods: {

                getIndex: function (index) {
                    if (this.addCar[index] == null) {
                        this.addCar.push(index);
                    }

                },
                getIsOk: function (val) {
                    function RemoveValByIndex(arr, index) {
                        arr.splice(index, 1);
                    }
                    if (this.products[val].pro_num == 0) {
                        RemoveValByIndex(this.addCar, val)
                    }
                },
            },
            computed:
                {

                    GetAllpries: function () {

                        var allprise = 0.0;
                        var allnum = 0;

                        for (var i = 0; i < this.addCar.length; i++) {
                            var index = this.addCar[i]
                            var prise = (this.products[index].pro_pries * this.products[index].pro_num)
                            prise2 = parseInt(prise * 10) / 10;
                            allprise += prise2;
                            allnum += this.products[index].pro_num;
                        }
                        console.log(new Date().getTime())
                        return {allprise: allprise.toFixed(1), allnum: allnum}

                    }
                    ,

                }
            ,

        })
    ;
    $(function(){
        $(".allselect").click(function(){
            $(".add").click();
        })
    })
</script>
</body>
</html>